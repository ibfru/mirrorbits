# vim: set ft=yaml:

###################
##### GENERAL #####
###################

## Path to the local repository
Repository: D:\B\openeuler-sync\
#OutputMode: json

RepositoryFilter:
  SecondDir:
    - ISO
    - edge_img
    - virtual_machine_img
    - embedded_img
  ThirdDir:
    - x86_64
    - x86-64
    - aarch64
    - arm32
    - loongarch64
    - riscv64
    - power
    - sw64
  ParticularFileMapping:
    - VersionName: openEuler-22.03-LTS
      ScenarioName: ISO
      ArchName: sw64
      SourcePath:
        - openEuler-preview\sw_arch\openEuler-22.03-LTS\ISO\openEuler-Server-OS-isoe-sw_64-20220927.iso
        - openEuler-preview\sw_arch\openEuler-22.03-LTS\ISO\openEuler-Server-OS-isoe-sw_64-20220927-everything.iso
    - VersionName: openEuler-24.03-LTS
      ScenarioName: ISO
      ArchName: riscv64
      SourcePath:
        - openEuler-preview\openEuler-24.03-LLVM-Preview\ISO\riscv64\openEuler-24.03-LLVM-riscv64-dvd.iso

## Path to the templates (default autodetect)
Templates: templates

## A local path or URL containing the JavaScript used by the templates.
## If this is not set (the default), the JavaScript will just be loaded
## from the usual CDNs. See also `contrib/localjs/fetchfiles.sh`.
# LocalJSPath:

## Path where to store logs (comment to disable)
#LogDir: /var/log/mirrorbits

## Path to the GeoIP2 mmdb databases
GeoipDatabasePath: GeoIP

## OutputMode can take on the three values:
##  - redirect: HTTP redirect to the destination file on the selected mirror
##  - json: return a json document for pre-treatment by an application
##  - auto: based on the Accept HTTP header
OutputMode: json

## Enable Gzip compression
# Gzip: false

## Host an port to listen on
ListenAddress: :8070

## Host and port to listen for the CLI RPC
RPCListenAddress: localhost:3390

## Password for restricting access to the CLI (optional)
#RPCPassword:

####################
##### DATABASE #####
####################

## Redis host and port
RedisAddress: ubthost:6379

## Redis password (if any)
#RedisPassword:

## Redis database ID (if any)
RedisDB: 0

## Redis sentinel name (only if using sentinel)
# RedisSentinelMasterName: mirrorbits

## List of Redis sentinel hosts (only if using sentinel)
# RedisSentinels:
#     - Host: 10.0.0.1:26379
#     - Host: 10.0.0.2:26379
#     - Host: 10.0.0.3:26379

###################
##### MIRRORS #####
###################

## Relative path to the trace file within the repository (optional).
## The file must contain the number of seconds since epoch and should
## be updated every minute (or so) with a cron on the master repository.
# TraceFileLocation: /trace

## Interval between two scans of the local repository.
## The repository scan will index new and removed files and collect file
## sizes and checksums.
## This should, more or less, match the frequency where the local repo
## is updated.
RepositoryScanInterval: 3

## Enable or disable specific hashing algorithms
# Hashes:
#     SHA256: On
#     SHA1: Off
#     MD5: Off

###################
##### MIRRORS #####
###################

## Maximum number of concurrent mirror synchronization to do (rsync/ftp/http)
ConcurrentSync: 10

## Interval in minutes between mirror scan
ScanInterval: 1

## Interval in minutes between mirrors HTTP health checks
CheckInterval: 10

## Allow a mirror to issue an HTTP redirect.
## Setting this to true will disable the mirror if a redirect is detected.
# DisallowRedirects: false

## Disable a mirror if an active file is missing (HTTP 404)
# DisableOnMissingFile: false

## Adjust the weight/range of the geographic distribution
# WeightDistributionRange: 1.5

## Maximum number of alternative links to return in the HTTP header
# MaxLinkHeaders: 10

## Automatically fix timezone offsets.
## Enable this if one or more mirrors are always excluded because their
## last-modification-time mismatch. This option will try to guess the
## offset and adjust the mod time accordingly.
## Affected mirrors will need to be rescanned after enabling this feature.
# FixTimezoneOffsets: false

## List of mirrors to use as fallback which will be used in case mirrorbits
## is unable to answer a request because the database is unreachable.
## Note: Mirrorbits will redirect to one of these mirrors based on the user
## location but won't be able to know if the mirror has the requested file.
## Therefore only put your most reliable and up-to-date mirrors here.
# Fallbacks:
#     - URL: http://fallback1.mirror/repo/
#       CountryCode: fr
#       ContinentCode: eu
#     - URL: http://fallback2.mirror/repo/
#       CountryCode: us
#       ContinentCode: na

Fallbacks:
    - URL: http://121.36.97.194/
      CountryCode: CN
      ContinentCode: AS
